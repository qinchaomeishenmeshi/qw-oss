"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;
exports.name2Url = name2Url;
var _getOssClient = require("./get-oss-client");
/**
 *
 * @param name 是OssUploadResponse.name，详情见simple-upload.ts的类型
 * @returns 完整url
 */
async function name2Url(name, download = false) {
  const list = name.split("/");
  return await (await (0, _getOssClient.getOssClient)()).signatureUrl(name, download ? {
    response: {
      "content-disposition": `attachment; filename=${encodeURIComponent(list[list.length - 1] || "no-titled")}`
    }
  } : undefined);
}
var _default = name2Url;
exports.default = _default;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJuYW1lMlVybCIsIm5hbWUiLCJkb3dubG9hZCIsImxpc3QiLCJzcGxpdCIsImdldE9zc0NsaWVudCIsInNpZ25hdHVyZVVybCIsInJlc3BvbnNlIiwiZW5jb2RlVVJJQ29tcG9uZW50IiwibGVuZ3RoIiwidW5kZWZpbmVkIl0sInNvdXJjZXMiOlsiLi4vLi4vbGliU3JjL3NyYy9uYW1lLTItdXJsLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGdldE9zc0NsaWVudCB9IGZyb20gXCIuL2dldC1vc3MtY2xpZW50XCI7XG5cbi8qKlxuICpcbiAqIEBwYXJhbSBuYW1lIOaYr09zc1VwbG9hZFJlc3BvbnNlLm5hbWXvvIzor6bmg4Xop4FzaW1wbGUtdXBsb2FkLnRz55qE57G75Z6LXG4gKiBAcmV0dXJucyDlrozmlbR1cmxcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIG5hbWUyVXJsKG5hbWU6IHN0cmluZywgZG93bmxvYWQgPSBmYWxzZSkge1xuICBjb25zdCBsaXN0ID0gbmFtZS5zcGxpdChcIi9cIik7XG4gIHJldHVybiBhd2FpdCAoXG4gICAgYXdhaXQgZ2V0T3NzQ2xpZW50KClcbiAgKS5zaWduYXR1cmVVcmwoXG4gICAgbmFtZSxcbiAgICBkb3dubG9hZFxuICAgICAgPyB7XG4gICAgICAgICAgcmVzcG9uc2U6IHtcbiAgICAgICAgICAgIFwiY29udGVudC1kaXNwb3NpdGlvblwiOiBgYXR0YWNobWVudDsgZmlsZW5hbWU9JHtlbmNvZGVVUklDb21wb25lbnQoXG4gICAgICAgICAgICAgIGxpc3RbbGlzdC5sZW5ndGggLSAxXSB8fCBcIm5vLXRpdGxlZFwiXG4gICAgICAgICAgICApfWAsXG4gICAgICAgICAgfSxcbiAgICAgICAgfVxuICAgICAgOiB1bmRlZmluZWRcbiAgKTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgbmFtZTJVcmw7XG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTyxlQUFlQSxRQUFRLENBQUNDLElBQVksRUFBRUMsUUFBUSxHQUFHLEtBQUssRUFBRTtFQUM3RCxNQUFNQyxJQUFJLEdBQUdGLElBQUksQ0FBQ0csS0FBSyxDQUFDLEdBQUcsQ0FBQztFQUM1QixPQUFPLE1BQU0sQ0FDWCxNQUFNLElBQUFDLDBCQUFZLEdBQUUsRUFDcEJDLFlBQVksQ0FDWkwsSUFBSSxFQUNKQyxRQUFRLEdBQ0o7SUFDRUssUUFBUSxFQUFFO01BQ1IscUJBQXFCLEVBQUcsd0JBQXVCQyxrQkFBa0IsQ0FDL0RMLElBQUksQ0FBQ0EsSUFBSSxDQUFDTSxNQUFNLEdBQUcsQ0FBQyxDQUFDLElBQUksV0FBVyxDQUNwQztJQUNKO0VBQ0YsQ0FBQyxHQUNEQyxTQUFTLENBQ2Q7QUFDSDtBQUFDLGVBRWNWLFFBQVE7QUFBQSJ9