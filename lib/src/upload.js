"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;
exports.getUsableUrlFromOssUrl = getUsableUrlFromOssUrl;
exports.upload = upload;
var _class = require("../class");
var _getOssNameFromUrl = require("./get-oss-name-from-url");
var _isOssUrl = _interopRequireDefault(require("./is-oss-url"));
var _name2Url = _interopRequireDefault(require("./name-2-url"));
function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }
async function getUsableUrlFromOssUrl(ossUrl) {
  if (!(0, _isOssUrl.default)(ossUrl)) return false;
  let name = (0, _getOssNameFromUrl.getOssNameFromUrl)(ossUrl);
  name = decodeURI(name);
  name = decodeURI(name);
  const signedUrl = await (0, _name2Url.default)(name);
  return signedUrl;
}
function upload(...args) {
  return _class.QwOss.getGlobalInstance().upload(...args);
}
var _default = upload;
exports.default = _default;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJnZXRVc2FibGVVcmxGcm9tT3NzVXJsIiwib3NzVXJsIiwiaXNPc3NVcmwiLCJuYW1lIiwiZ2V0T3NzTmFtZUZyb21VcmwiLCJkZWNvZGVVUkkiLCJzaWduZWRVcmwiLCJuYW1lMlVybCIsInVwbG9hZCIsImFyZ3MiLCJRd09zcyIsImdldEdsb2JhbEluc3RhbmNlIl0sInNvdXJjZXMiOlsiLi4vLi4vbGliU3JjL3NyYy91cGxvYWQudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgUXdPc3MgfSBmcm9tICcuLi9jbGFzcydcbmltcG9ydCB7IGdldE9zc05hbWVGcm9tVXJsIH0gZnJvbSAnLi9nZXQtb3NzLW5hbWUtZnJvbS11cmwnXG5pbXBvcnQgaXNPc3NVcmwgZnJvbSAnLi9pcy1vc3MtdXJsJ1xuaW1wb3J0IG5hbWUyVXJsIGZyb20gJy4vbmFtZS0yLXVybCdcblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldFVzYWJsZVVybEZyb21Pc3NVcmwob3NzVXJsOiBzdHJpbmcpIHtcbiAgaWYgKCFpc09zc1VybChvc3NVcmwpKSByZXR1cm4gZmFsc2VcbiAgbGV0IG5hbWUgPSBnZXRPc3NOYW1lRnJvbVVybChvc3NVcmwpXG4gIG5hbWUgPSBkZWNvZGVVUkkobmFtZSlcbiAgbmFtZSA9IGRlY29kZVVSSShuYW1lKVxuICBjb25zdCBzaWduZWRVcmwgPSBhd2FpdCBuYW1lMlVybChuYW1lKVxuICByZXR1cm4gc2lnbmVkVXJsXG59XG5cbmV4cG9ydCBmdW5jdGlvbiB1cGxvYWQoLi4uYXJnczogUGFyYW1ldGVyczxRd09zc1sndXBsb2FkJ10+KSB7XG4gIHJldHVybiBRd09zcy5nZXRHbG9iYWxJbnN0YW5jZSgpLnVwbG9hZCguLi5hcmdzKVxufVxuXG5leHBvcnQgZGVmYXVsdCB1cGxvYWRcbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFtQztBQUU1QixlQUFlQSxzQkFBc0IsQ0FBQ0MsTUFBYyxFQUFFO0VBQzNELElBQUksQ0FBQyxJQUFBQyxpQkFBUSxFQUFDRCxNQUFNLENBQUMsRUFBRSxPQUFPLEtBQUs7RUFDbkMsSUFBSUUsSUFBSSxHQUFHLElBQUFDLG9DQUFpQixFQUFDSCxNQUFNLENBQUM7RUFDcENFLElBQUksR0FBR0UsU0FBUyxDQUFDRixJQUFJLENBQUM7RUFDdEJBLElBQUksR0FBR0UsU0FBUyxDQUFDRixJQUFJLENBQUM7RUFDdEIsTUFBTUcsU0FBUyxHQUFHLE1BQU0sSUFBQUMsaUJBQVEsRUFBQ0osSUFBSSxDQUFDO0VBQ3RDLE9BQU9HLFNBQVM7QUFDbEI7QUFFTyxTQUFTRSxNQUFNLENBQUMsR0FBR0MsSUFBaUMsRUFBRTtFQUMzRCxPQUFPQyxZQUFLLENBQUNDLGlCQUFpQixFQUFFLENBQUNILE1BQU0sQ0FBQyxHQUFHQyxJQUFJLENBQUM7QUFDbEQ7QUFBQyxlQUVjRCxNQUFNO0FBQUEifQ==