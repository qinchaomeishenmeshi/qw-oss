"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;
exports.getUsableUrlFromOssUrl = getUsableUrlFromOssUrl;
exports.upload = upload;
var _class = require("../class");
var _getOssNameFromUrl = require("./get-oss-name-from-url");
var _isOssUrl = _interopRequireDefault(require("./is-oss-url"));
var _name2Url = _interopRequireDefault(require("./name-2-url"));
function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }
async function getUsableUrlFromOssUrl(ossUrl) {
  if (!(0, _isOssUrl.default)(ossUrl)) return false;
  let name = (0, _getOssNameFromUrl.getOssNameFromUrl)(ossUrl);
  name = decodeURI(name);
  name = decodeURI(name);
  const signedUrl = await (0, _name2Url.default)(name);
  return signedUrl;
}
function upload(...args) {
  return _class.TtOss.getGlobalInstance().upload(...args);
}
var _default = upload;
exports.default = _default;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJnZXRVc2FibGVVcmxGcm9tT3NzVXJsIiwib3NzVXJsIiwiaXNPc3NVcmwiLCJuYW1lIiwiZ2V0T3NzTmFtZUZyb21VcmwiLCJkZWNvZGVVUkkiLCJzaWduZWRVcmwiLCJuYW1lMlVybCIsInVwbG9hZCIsImFyZ3MiLCJUdE9zcyIsImdldEdsb2JhbEluc3RhbmNlIl0sInNvdXJjZXMiOlsiLi4vLi4vbGliU3JjL3NyYy91cGxvYWQudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgVHRPc3MgfSBmcm9tIFwiLi4vY2xhc3NcIjtcbmltcG9ydCB7IGdldE9zc05hbWVGcm9tVXJsIH0gZnJvbSBcIi4vZ2V0LW9zcy1uYW1lLWZyb20tdXJsXCI7XG5pbXBvcnQgaXNPc3NVcmwgZnJvbSBcIi4vaXMtb3NzLXVybFwiO1xuaW1wb3J0IG5hbWUyVXJsIGZyb20gXCIuL25hbWUtMi11cmxcIjtcblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldFVzYWJsZVVybEZyb21Pc3NVcmwob3NzVXJsOiBzdHJpbmcpIHtcbiAgaWYgKCFpc09zc1VybChvc3NVcmwpKSByZXR1cm4gZmFsc2U7XG4gIGxldCBuYW1lID0gZ2V0T3NzTmFtZUZyb21Vcmwob3NzVXJsKTtcbiAgbmFtZSA9IGRlY29kZVVSSShuYW1lKTtcbiAgbmFtZSA9IGRlY29kZVVSSShuYW1lKTtcbiAgY29uc3Qgc2lnbmVkVXJsID0gYXdhaXQgbmFtZTJVcmwobmFtZSk7XG4gIHJldHVybiBzaWduZWRVcmw7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiB1cGxvYWQoLi4uYXJnczogUGFyYW1ldGVyczxUdE9zc1tcInVwbG9hZFwiXT4pIHtcbiAgcmV0dXJuIFR0T3NzLmdldEdsb2JhbEluc3RhbmNlKCkudXBsb2FkKC4uLmFyZ3MpO1xufVxuXG5leHBvcnQgZGVmYXVsdCB1cGxvYWQ7XG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBb0M7QUFFN0IsZUFBZUEsc0JBQXNCLENBQUNDLE1BQWMsRUFBRTtFQUMzRCxJQUFJLENBQUMsSUFBQUMsaUJBQVEsRUFBQ0QsTUFBTSxDQUFDLEVBQUUsT0FBTyxLQUFLO0VBQ25DLElBQUlFLElBQUksR0FBRyxJQUFBQyxvQ0FBaUIsRUFBQ0gsTUFBTSxDQUFDO0VBQ3BDRSxJQUFJLEdBQUdFLFNBQVMsQ0FBQ0YsSUFBSSxDQUFDO0VBQ3RCQSxJQUFJLEdBQUdFLFNBQVMsQ0FBQ0YsSUFBSSxDQUFDO0VBQ3RCLE1BQU1HLFNBQVMsR0FBRyxNQUFNLElBQUFDLGlCQUFRLEVBQUNKLElBQUksQ0FBQztFQUN0QyxPQUFPRyxTQUFTO0FBQ2xCO0FBRU8sU0FBU0UsTUFBTSxDQUFDLEdBQUdDLElBQWlDLEVBQUU7RUFDM0QsT0FBT0MsWUFBSyxDQUFDQyxpQkFBaUIsRUFBRSxDQUFDSCxNQUFNLENBQUMsR0FBR0MsSUFBSSxDQUFDO0FBQ2xEO0FBQUMsZUFFY0QsTUFBTTtBQUFBIn0=